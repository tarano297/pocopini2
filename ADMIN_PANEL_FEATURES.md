# ویژگی‌های جدید پنل ادمین

## تغییرات اعمال شده

### 1. بهبود پنل ادمین سفارشات (Orders)

#### نمایش اطلاعات کامل در لیست سفارشات:
- **شماره سفارش**: نمایش با فرمت #123
- **اطلاعات کاربر**: نام کاربری، نام کامل و شماره تلفن
- **خلاصه اقلام**: نمایش محصولات خریداری شده در هر سفارش
- **قیمت کل**: با فرمت جداکننده هزارگان
- **وضعیت پرداخت**: نمایش وضعیت پرداخت در لیست
- **فیلترهای پیشرفته**: فیلتر بر اساس وضعیت، روش پرداخت، روش ارسال و تاریخ

#### جزئیات سفارش:
- **اطلاعات کامل کاربر**: 
  - نام کاربری
  - نام و نام خانوادگی
  - ایمیل
  - شماره تلفن
  - تاریخ عضویت
  - تعداد کل سفارشات کاربر

- **فاکتور کامل سفارش**:
  - شماره سفارش و تاریخ
  - وضعیت سفارش و پرداخت
  - شماره پیگیری (در صورت وجود)
  - اطلاعات خریدار
  - آدرس تحویل کامل
  - جدول اقلام با قیمت واحد و جمع
  - هزینه ارسال
  - جمع کل

- **جزئیات کامل اقلام**: جدول کامل محصولات با قیمت و تعداد

### 2. بهبود پنل ادمین کاربران (Users)

#### نمایش در لیست کاربران:
- نام کامل
- شماره تلفن
- **تعداد سفارشات**: با لینک مستقیم به سفارشات کاربر
- **مجموع خرید**: مجموع مبلغ سفارشات پرداخت شده

#### فیلدهای جدید در پایگاه داده:
- **کد ملی** (national_code): برای ذخیره کد ملی کاربران
- **تاریخ تولد** (birth_date): برای ذخیره تاریخ تولد
- **یادداشت‌های ادمین** (notes): برای ثبت یادداشت‌های داخلی درباره کاربر

#### جزئیات کاربر:
- **خلاصه سفارشات**:
  - تعداد کل سفارشات
  - مجموع خرید (فقط سفارشات پرداخت شده)
  - تفکیک وضعیت سفارشات (در انتظار، در حال پردازش، ارسال شده، تحویل داده شده، لغو شده)
  - لینک مستقیم به لیست سفارشات کاربر

- **تاریخچه خرید (10 سفارش اخیر)**:
  - جدول کامل با شماره سفارش
  - تاریخ ثبت
  - لیست اقلام خریداری شده
  - مبلغ سفارش
  - وضعیت سفارش
  - لینک مشاهده جزئیات

- **آدرس‌های کاربر**: نمایش inline تمام آدرس‌های ثبت شده

### 3. ویژگی‌های اضافی

- **جستجوی پیشرفته**: امکان جستجو بر اساس نام کاربری، ایمیل، شماره تلفن، نام و نام خانوادگی
- **فیلترهای هوشمند**: فیلتر سفارشات بر اساس کاربر، وضعیت، تاریخ
- **لینک‌های متقابل**: لینک مستقیم از کاربر به سفارشات و بالعکس
- **نمایش بصری بهتر**: استفاده از جداول HTML برای نمایش بهتر اطلاعات
- **فرمت‌بندی اعداد**: نمایش قیمت‌ها با جداکننده هزارگان

## نحوه استفاده

### مشاهده سفارشات کاربر:
1. وارد پنل ادمین شوید
2. به بخش "کاربران" بروید
3. روی کاربر مورد نظر کلیک کنید
4. در بخش "آمار و سفارشات" می‌توانید:
   - خلاصه سفارشات را مشاهده کنید
   - تاریخچه 10 سفارش اخیر را ببینید
   - روی "مشاهده همه سفارشات" کلیک کنید

### مشاهده فاکتور سفارش:
1. به بخش "سفارشات" بروید
2. روی سفارش مورد نظر کلیک کنید
3. در بخش "فاکتور و جزئیات" می‌توانید:
   - فاکتور کامل را مشاهده کنید
   - جزئیات کامل اقلام را ببینید

### ثبت اطلاعات اضافی کاربر:
1. به بخش "کاربران" بروید
2. روی کاربر کلیک کنید
3. در بخش "اطلاعات اضافی":
   - کد ملی را وارد کنید
   - تاریخ تولد را انتخاب کنید
   - یادداشت‌های مورد نیاز را بنویسید

## Migration

فایل migration جدید ایجاد شده است:
```
accounts/migrations/0002_user_birth_date_user_national_code_user_notes.py
```

این migration سه فیلد جدید به مدل User اضافه می‌کند و به صورت خودکار اعمال شده است.

## نکات مهم

- تمام فیلدهای جدید اختیاری هستند (null=True, blank=True)
- اطلاعات موجود کاربران تغییری نمی‌کند
- فاکتورها به صورت خودکار از اطلاعات موجود تولید می‌شوند
- امکان چاپ یا ذخیره فاکتورها وجود دارد (با استفاده از قابلیت چاپ مرورگر)
